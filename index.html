<!DOCTYPE html>
<html>

<head>
  <title>Browser Image Compression</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Browser Image Compression">
  <meta name="robots" content="noindex, nofollow">
  <link rel="stylesheet" type="text/css" href="./assets/css/fonts.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/variables.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/functions.css">
  <link rel="stylesheet" type="text/css" href="./assets/css/style.css">
</head>

<body>
  <div class="top-nav">
    <h1>Browser Image Compression</h1>
  </div>

  <div class="content">

    <div class="drop-zone" id="webWorkerDropZone">
      <div class="drop-zone__border-dashed"></div>
      <div class="drop-zone__cell-grid"></div>
      <div class="drop-zone__vignette-outer"></div>
      <div class="drop-zone__vignette-inner"></div>
      <div class="drop-zone__shade"></div>
      <div class="drop-zone__shade-top"></div>


      <div class="drop-zone-content">
        <div class="drop-zone-content__border-top-fade"></div>
        <div class="drop-zone-content__border"></div>
        
        <div class="drop-zone-content__actions">
          <div class="drop-zone-content__actions-text">Drag an image here or browse</div>
          <button class="button-secondary">
            <svg height="16" stroke-linejoin="round" viewBox="0 0 16 16" width="16" style="color: currentcolor;"><path fill-rule="evenodd" clip-rule="evenodd" d="M14.5 7.5V12.5C14.5 13.0523 14.0523 13.5 13.5 13.5H2.5C1.94772 13.5 1.5 13.0523 1.5 12.5V7.5H14.5ZM14.5 6V4H8.83333C8.29241 4 7.76607 3.82456 7.33333 3.5L6 2.5H1.5V6H14.5ZM0 1H1.5H6.16667C6.38304 1 6.59357 1.07018 6.76667 1.2L8.23333 2.3C8.40643 2.42982 8.61696 2.5 8.83333 2.5H14.5H16V4V12.5C16 13.8807 14.8807 15 13.5 15H2.5C1.11929 15 0 13.8807 0 12.5V2.5V1Z" fill="currentColor"></path></svg>
            Browse
          </button>
        </div>
        
        <input id="webWorker" type="file" accept="image/*" />
        <span id="webWorkerProgress"></span>
        <p id="webWorkerLog"></p>
      </div>
    </div>

    <div class="image-options-container">

      <div class="form-group">
        <div class="form-group__label-content">
          <label class="form-group__label-text">
            Compression method
          </label>
        </div>
        <div class="form-group__input-content">
          <select name="compressMethod" id="compressMethod" onchange="toggleFields()">
            <option value="maxSizeMB">Target max file size</option>
            <option value="initialQuality">Adjust quality</option>
          </select>
        </div>
      </div>

      <div class="form-group hidden">
        <div class="form-group__label-content">
          <label class="form-group__label-text" for="maxSizeMB">
            Target file size
          </label>
          <div class="form-group__description">
            The target maximum file size in megabytes (MB).
          </div>
        </div>
        <div class="form-group__input-content">
          <input type="number" id="maxSizeMB" name="maxSizeMB" value="1" />
        </div>
      </div>


      <div class="form-group hidden">
        <div class="form-group__label-content">
          <label class="form-group__label-text" for="initialQuality">
            Quality
          </label>
          <div class="form-group__description">
            Adjust the image quality from 0% (lowest) to 100% (highest). Higher values preserve more detail, while lower values reduce file size.
          </div>
        </div>
        <div class="form-group__input-content">
          <input type="number" id="initialQuality" name="initialQuality" value="1" />
        </div>
      </div>

      <div class="form-group">
        <div class="form-group__label-content">
          <label class="form-group__label-text" for="maxWidthOrHeight">
            Max dimension
          </label>
          <div class="form-group__description">
            Limit the width or height of the image to this value in pixels, whichever is larger.
          </div>
        </div>
        <div class="form-group__input-content">
          <input type="number" id="maxWidthOrHeight" name="maxWidthOrHeight" value="1024" />
        </div>
      </div>


      <div class="form-group">
        <div class="form-group__label-content">
          <label class="form-group__label-text" for="formatSelect">
            Convert to
          </label>
        </div>
        <div class="form-group__input-content">
          <select id="formatSelect">
            <option value="">No conversion</option>
            <option value="image/jpeg">JPEG</option>
            <option value="image/png">PNG</option>
            <option value="image/webp">WebP</option>
          </select>
        </div>
      </div>


    </div>

    <div id="webWorkerAbort" class="hidden">
      <button onclick="abort()">Abort</button>
    </div>




    <div style="display: flex;">
      <div style="flex: 1"><img id="preview" /></div>
      <div style="flex: 1"><img id="previewAfterCompress" /></div>
    </div>

    <div id="outputDownloadContainer">

    </div>

  </div>

  <script type="text/javascript" src="./assets/js/browser-image-compression.js"></script>
  <script type="text/javascript" src="./assets/js/script.js"></script>
</body>

</html>